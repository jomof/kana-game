{
  "schemaVersion": "1.0.0",
  "readme": "",
  "modules": [
    {
      "kind": "javascript-module",
      "path": "src/augment.ts",
      "declarations": [
        {
          "kind": "function",
          "name": "makeReadingModifierAugmenter",
          "return": {
            "type": {
              "text": "TokenAugmenter"
            }
          },
          "parameters": [
            {
              "name": "surfaceForm",
              "type": {
                "text": "string"
              }
            },
            {
              "name": "newReading",
              "type": {
                "text": "string"
              }
            }
          ]
        },
        {
          "kind": "function",
          "name": "toLexicalKey",
          "return": {
            "type": {
              "text": "string"
            }
          },
          "parameters": [
            {
              "name": "tokens",
              "type": {
                "text": "IpadicFeatures[]"
              }
            }
          ]
        },
        {
          "kind": "function",
          "name": "augmentTokenGroups",
          "return": {
            "type": {
              "text": "Promise<IpadicFeatures[][]>"
            }
          },
          "parameters": [
            {
              "name": "initialGroups",
              "type": {
                "text": "IpadicFeatures[][]"
              }
            }
          ]
        }
      ],
      "exports": [
        {
          "kind": "js",
          "name": "makeReadingModifierAugmenter",
          "declaration": {
            "name": "makeReadingModifierAugmenter",
            "module": "src/augment.ts"
          }
        },
        {
          "kind": "js",
          "name": "toLexicalKey",
          "declaration": {
            "name": "toLexicalKey",
            "module": "src/augment.ts"
          }
        },
        {
          "kind": "js",
          "name": "augmentTokenGroups",
          "declaration": {
            "name": "augmentTokenGroups",
            "module": "src/augment.ts"
          }
        }
      ]
    },
    {
      "kind": "javascript-module",
      "path": "src/kana-control-logic.ts",
      "declarations": [
        {
          "kind": "function",
          "name": "findMatch",
          "return": {
            "type": {
              "text": ""
            }
          },
          "parameters": [
            {
              "name": "tokens",
              "type": {
                "text": "Token[]"
              }
            },
            {
              "name": "str",
              "type": {
                "text": "string"
              }
            },
            {
              "name": "startIdx",
              "type": {
                "text": "number"
              }
            },
            {
              "name": "pos",
              "type": {
                "text": "number"
              }
            }
          ],
          "description": "Recursive helper to find matching tokens."
        },
        {
          "kind": "function",
          "name": "markTokens",
          "return": {
            "type": {
              "text": "{matched: number[] | null}"
            }
          },
          "parameters": [
            {
              "name": "tokens",
              "type": {
                "text": "Token[]"
              }
            },
            {
              "name": "str",
              "type": {
                "text": "string"
              }
            }
          ],
          "description": "Flat‐array overload"
        },
        {
          "kind": "function",
          "name": "markTokens",
          "return": {
            "type": {
              "text": "{matched: number[] | null}[]"
            }
          },
          "parameters": [
            {
              "name": "tokens",
              "type": {
                "text": "Token[][]"
              }
            },
            {
              "name": "str",
              "type": {
                "text": "string"
              }
            }
          ],
          "description": "Nested‐array overload"
        },
        {
          "kind": "function",
          "name": "markTokens",
          "return": {
            "type": {
              "text": "{matched: number[] | null} | {matched: number[] | null}[]"
            }
          },
          "parameters": [
            {
              "name": "tokens",
              "type": {
                "text": "Token[] | Token[][]"
              }
            },
            {
              "name": "str",
              "type": {
                "text": "string"
              }
            }
          ],
          "description": "If given a flat Token[], tries to match & flip exactly as before.\nIf given Token[][], first picks only those sub‐arrays with the\n**highest current count** of `marked===true`, and runs the flat logic\non them; all others return `{ matched: null }`."
        },
        {
          "kind": "function",
          "name": "getGroupsWithMaxMarkedTokens",
          "return": {
            "type": {
              "text": "Token[][]"
            }
          },
          "parameters": [
            {
              "name": "groups",
              "type": {
                "text": "Token[][]"
              }
            }
          ],
          "description": "Filters an array of token groups, returning only those with the maximum\nnumber of marked tokens."
        },
        {
          "kind": "function",
          "name": "anyMarked",
          "return": {
            "type": {
              "text": "boolean"
            }
          },
          "parameters": [
            {
              "name": "result",
              "type": {
                "text": "{matched: number[] | null}[]"
              }
            }
          ],
          "description": "Returns true if any token was newly marked."
        },
        {
          "kind": "function",
          "name": "selectBestGroup",
          "return": {
            "type": {
              "text": "Token[]"
            }
          },
          "parameters": [
            {
              "name": "groups",
              "type": {
                "text": "Token[][]"
              }
            }
          ],
          "description": "Selects the \"best\" token sequence from an array of candidate groups.\nCriteria:\n 1. Highest number of tokens with `marked === true`\n 2. (Tiebreaker) Lowest number of tokens with `marked === false`"
        },
        {
          "kind": "function",
          "name": "isCompleted",
          "return": {
            "type": {
              "text": "boolean"
            }
          },
          "parameters": [
            {
              "name": "tokens",
              "type": {
                "text": "Token[]"
              }
            }
          ],
          "description": "Returns true if every non-punctuation token in the array is marked."
        },
        {
          "kind": "function",
          "name": "makeQuestion",
          "return": {
            "type": {
              "text": ""
            }
          },
          "parameters": [
            {
              "name": "english",
              "type": {
                "text": "string"
              },
              "description": "English text with optional furigana annotations"
            },
            {
              "name": "japanese",
              "type": {
                "text": "string[]"
              },
              "description": "Array of acceptable Japanese answers"
            }
          ],
          "description": "Creates a Question object from an English prompt and Japanese answer(s).\nEnglish can include furigana annotations in brackets: \"word[ふりがな]\""
        },
        {
          "kind": "function",
          "name": "parseEnglishString",
          "return": {
            "type": {
              "text": "ParsedEnglish"
            }
          },
          "parameters": [
            {
              "name": "eng",
              "type": {
                "text": "string"
              }
            }
          ]
        }
      ],
      "exports": [
        {
          "kind": "js",
          "name": "findMatch",
          "declaration": {
            "name": "findMatch",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "markTokens",
          "declaration": {
            "name": "markTokens",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "markTokens",
          "declaration": {
            "name": "markTokens",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "markTokens",
          "declaration": {
            "name": "markTokens",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "getGroupsWithMaxMarkedTokens",
          "declaration": {
            "name": "getGroupsWithMaxMarkedTokens",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "anyMarked",
          "declaration": {
            "name": "anyMarked",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "selectBestGroup",
          "declaration": {
            "name": "selectBestGroup",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "isCompleted",
          "declaration": {
            "name": "isCompleted",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "makeQuestion",
          "declaration": {
            "name": "makeQuestion",
            "module": "src/kana-control-logic.ts"
          }
        },
        {
          "kind": "js",
          "name": "parseEnglishString",
          "declaration": {
            "name": "parseEnglishString",
            "module": "src/kana-control-logic.ts"
          }
        }
      ]
    },
    {
      "kind": "javascript-module",
      "path": "src/kana-control.ts",
      "declarations": [
        {
          "kind": "class",
          "description": "A Japanese kana input control component with optional question/progress display.\nConverts romaji input to kana using WanaKana IME mode.",
          "name": "KanaControl",
          "cssParts": [
            {
              "description": "The complete/skip button inside the input",
              "name": "action-button"
            },
            {
              "description": "The kana input field",
              "name": "kana-input"
            },
            {
              "description": "The English prompt/question display",
              "name": "english"
            },
            {
              "description": "The progress skeleton display",
              "name": "skeleton"
            },
            {
              "description": "The debug output container",
              "name": "debug"
            }
          ],
          "slots": [
            {
              "description": "This element has a slot",
              "name": ""
            }
          ],
          "members": [
            {
              "kind": "field",
              "name": "question",
              "type": {
                "text": "Question | null"
              },
              "privacy": "private",
              "default": "null",
              "description": "The current question being displayed/answered."
            },
            {
              "kind": "field",
              "name": "parsedEnglish",
              "type": {
                "text": "ParsedEnglish"
              },
              "default": "[]",
              "description": "Parsed English parts with furigana annotations."
            },
            {
              "kind": "field",
              "name": "_furiganaVisibility",
              "type": {
                "text": "boolean[]"
              },
              "privacy": "private",
              "default": "[]",
              "description": "Visibility state for each furigana annotation."
            },
            {
              "kind": "field",
              "name": "_wrongAttempts",
              "type": {
                "text": "number"
              },
              "privacy": "private",
              "default": "0",
              "description": "Number of wrong attempts for the current question."
            },
            {
              "kind": "field",
              "name": "_correctAttempts",
              "type": {
                "text": "string[]"
              },
              "privacy": "private",
              "default": "[]",
              "description": "List of correct attempts for the current question."
            },
            {
              "kind": "field",
              "name": "_revealedHintIndices",
              "privacy": "private",
              "default": "new Set<number>()",
              "description": "Set of indices of English words for which the hint was revealed."
            },
            {
              "kind": "field",
              "name": "_revealedAnswer",
              "type": {
                "text": "boolean"
              },
              "privacy": "private",
              "default": "false",
              "description": "Whether the full answer has been revealed (after user gave up).\nWhen true, the skeleton displays the full answer with missed parts highlighted."
            },
            {
              "kind": "field",
              "name": "debug",
              "type": {
                "text": "boolean"
              },
              "default": "false",
              "description": "Debug mode - shows all possible remaining sentences.",
              "attribute": "debug"
            },
            {
              "kind": "field",
              "name": "initialScore",
              "default": "100",
              "description": "Initial score for a question. Defaults to 100.",
              "attribute": "initialScore",
              "type": {
                "text": "number"
              }
            },
            {
              "kind": "field",
              "name": "correctGuessFactor",
              "default": "0.95",
              "description": "Factor to multiply score by when a correct guess is made.\nDefaults to 0.95.",
              "attribute": "correctGuessFactor",
              "type": {
                "text": "number"
              }
            },
            {
              "kind": "field",
              "name": "incorrectGuessFactor",
              "default": "0.7",
              "description": "Factor to multiply score by when an incorrect guess is made.\nDefaults to 0.7.",
              "attribute": "incorrectGuessFactor",
              "type": {
                "text": "number"
              }
            },
            {
              "kind": "field",
              "name": "score",
              "type": {
                "text": "number"
              },
              "default": "-1",
              "description": "Current score for the active question.\n-1 indicates the question has not been started or score is hidden.\nThe score is updated based on user guesses:\n- Correct guess: score * correctGuessFactor (unless completed)\n- Incorrect guess: score * incorrectGuessFactor\n- Reveal answer: score * (incorrectGuessFactor ^ missing_tokens)"
            },
            {
              "kind": "method",
              "name": "supplyQuestion",
              "parameters": [
                {
                  "name": "question",
                  "type": {
                    "text": "Question"
                  },
                  "description": "The question to display"
                }
              ],
              "description": "Supply a new question to display.\nResets all state related to the previous question (attempts, hints, revealed answer)."
            },
            {
              "kind": "method",
              "name": "_handleKeydown",
              "privacy": "private",
              "return": {
                "type": {
                  "text": "void"
                }
              },
              "parameters": [
                {
                  "name": "e",
                  "type": {
                    "text": "KeyboardEvent"
                  }
                }
              ]
            },
            {
              "kind": "method",
              "name": "_handleActionButtonClick",
              "privacy": "private"
            },
            {
              "kind": "method",
              "name": "_getEventDetail",
              "privacy": "private"
            },
            {
              "kind": "method",
              "name": "_handleEnglishWordClick",
              "privacy": "private",
              "parameters": [
                {
                  "name": "index",
                  "type": {
                    "text": "number"
                  }
                }
              ]
            },
            {
              "kind": "method",
              "name": "_renderSkeleton",
              "privacy": "private"
            },
            {
              "kind": "method",
              "name": "_renderDebugInfo",
              "privacy": "private"
            }
          ],
          "events": [
            {
              "name": "question-complete",
              "type": {
                "text": "CustomEvent"
              },
              "description": "Fired when the question is completed successfully. Detail is `{ finalSkeleton: string, wrongAttempts: number, correctAttempts: string[], englishHints: string[], score: number }`."
            },
            {
              "name": "request-next-question",
              "type": {
                "text": "CustomEvent"
              },
              "description": "Fired when the user requests the next question (by clicking the button or pressing Enter after completion)."
            },
            {
              "name": "question-skipped",
              "type": {
                "text": "CustomEvent"
              },
              "description": "Fired when the question is skipped. Detail is `{ finalSkeleton: string, wrongAttempts: number, correctAttempts: string[], englishHints: string[], score: number }`."
            }
          ],
          "attributes": [
            {
              "name": "debug",
              "type": {
                "text": "boolean"
              },
              "default": "false",
              "description": "Debug mode - shows all possible remaining sentences.",
              "fieldName": "debug"
            },
            {
              "name": "initialScore",
              "default": "DEFAULT_INITIAL_SCORE",
              "description": "Initial score for a question. Defaults to 100.",
              "fieldName": "initialScore"
            },
            {
              "name": "correctGuessFactor",
              "default": "DEFAULT_CORRECT_GUESS_FACTOR",
              "description": "Factor to multiply score by when a correct guess is made.\nDefaults to 0.95.",
              "fieldName": "correctGuessFactor"
            },
            {
              "name": "incorrectGuessFactor",
              "default": "DEFAULT_INCORRECT_GUESS_FACTOR",
              "description": "Factor to multiply score by when an incorrect guess is made.\nDefaults to 0.7.",
              "fieldName": "incorrectGuessFactor"
            }
          ],
          "superclass": {
            "name": "LitElement",
            "package": "lit"
          },
          "tagName": "kana-control",
          "customElement": true
        }
      ],
      "exports": [
        {
          "kind": "js",
          "name": "Token",
          "declaration": {
            "name": "Token",
            "module": "./kana-control-logic.js"
          }
        },
        {
          "kind": "js",
          "name": "Question",
          "declaration": {
            "name": "Question",
            "module": "./kana-control-logic.js"
          }
        },
        {
          "kind": "js",
          "name": "ParsedEnglish",
          "declaration": {
            "name": "ParsedEnglish",
            "module": "./kana-control-logic.js"
          }
        },
        {
          "kind": "js",
          "name": "makeQuestion",
          "declaration": {
            "name": "makeQuestion",
            "module": "./kana-control-logic.js"
          }
        },
        {
          "kind": "js",
          "name": "KanaControl",
          "declaration": {
            "name": "KanaControl",
            "module": "src/kana-control.ts"
          }
        },
        {
          "kind": "custom-element-definition",
          "name": "kana-control",
          "declaration": {
            "name": "KanaControl",
            "module": "src/kana-control.ts"
          }
        }
      ]
    },
    {
      "kind": "javascript-module",
      "path": "src/tokenize.ts",
      "declarations": [
        {
          "kind": "function",
          "name": "tokenize",
          "parameters": [
            {
              "name": "text"
            }
          ]
        },
        {
          "kind": "function",
          "name": "setTokenizer",
          "parameters": [
            {
              "name": "fn",
              "type": {
                "text": "TokenizerFn"
              }
            }
          ]
        },
        {
          "kind": "function",
          "name": "resetTokenizer"
        }
      ],
      "exports": [
        {
          "kind": "js",
          "name": "tokenize",
          "declaration": {
            "name": "tokenize",
            "module": "src/tokenize.ts"
          }
        },
        {
          "kind": "js",
          "name": "setTokenizer",
          "declaration": {
            "name": "setTokenizer",
            "module": "src/tokenize.ts"
          }
        },
        {
          "kind": "js",
          "name": "resetTokenizer",
          "declaration": {
            "name": "resetTokenizer",
            "module": "src/tokenize.ts"
          }
        }
      ]
    },
    {
      "kind": "javascript-module",
      "path": "src/test/augment_test.ts",
      "declarations": [],
      "exports": []
    },
    {
      "kind": "javascript-module",
      "path": "src/test/kana-control-logic_test.ts",
      "declarations": [],
      "exports": []
    },
    {
      "kind": "javascript-module",
      "path": "src/test/kana-control_score_test.ts",
      "declarations": [],
      "exports": []
    },
    {
      "kind": "javascript-module",
      "path": "src/test/kana-control_test.ts",
      "declarations": [],
      "exports": []
    },
    {
      "kind": "javascript-module",
      "path": "src/test/tokenize_test.ts",
      "declarations": [],
      "exports": []
    }
  ]
}
